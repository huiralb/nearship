import{d as U,c as r,o as l,n as A,u as h,r as D,e as v,f as te,b as e,F as j,g as V,t as b,h as le,C as oe,i as q,a as u,m as re,w as x,j as F,k as w,l as T,p as ne,v as ue,q as de}from"./app-BqHnytXq.js";import{c as J,_ as ie}from"./index-BNt4wtak.js";import{_ as E,a as N,b as I}from"./InputError.vue_vue_type_script_setup_true_lang-DtYnPyis.js";import"./useForwardExpose-BRkzs9LI.js";const ce=U({__name:"Card",props:{class:{}},setup(p){const i=p;return(a,d)=>(l(),r("div",{"data-slot":"card",class:A(h(J)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",i.class))},[D(a.$slots,"default")],2))}}),ve=U({__name:"CardHeader",props:{class:{}},setup(p){const i=p;return(a,d)=>(l(),r("div",{"data-slot":"card-header",class:A(h(J)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",i.class))},[D(a.$slots,"default")],2))}}),me=U({__name:"CardContent",props:{class:{}},setup(p){const i=p;return(a,d)=>(l(),r("div",{"data-slot":"card-content",class:A(h(J)("px-6",i.class))},[D(a.$slots,"default")],2))}}),pe=(p,i)=>{const a=p.__vccOpts||p;for(const[d,f]of i)a[d]=f;return a},fe={class:"w-full"},be={class:"flex border-b mb-4"},ge=["onClick"],_e={class:"space-y-4"},xe={class:"flex items-start justify-between"},he={class:"flex items-center gap-2"},ke={class:"font-medium"},ye={class:"text-sm text-gray-500"},we={class:"text-right"},je={class:"font-medium"},$e={__name:"ShippingServiceTabs",props:{services:{type:Array,required:!0,default:()=>[]}},setup(p){const i=p,a=[{id:"semua",label:"Semua"},{id:"reguler",label:"Reguler"},{id:"express",label:"Express"},{id:"cargo",label:"Cargo"}],d=v("semua"),f=te(()=>{if(d.value==="semua")return i.services;const m={reguler:["REG"],express:["YES"],cargo:["JTR"]};return i.services.filter(c=>{var o;return(o=m[d.value])==null?void 0:o.includes(c.service)})}),g=m=>new Intl.NumberFormat("id-ID").format(m),y=m=>{const[c,o]=m.split("-");return o?`${c}-${o} Hari`:`${c} Hari`};return(m,c)=>(l(),r("div",fe,[e("div",be,[(l(),r(j,null,V(a,o=>e("button",{key:o.id,onClick:$=>d.value=o.id,class:A(["px-4 py-2 -mb-px",[d.value===o.id?"text-blue-500 border-b-2 border-blue-500 font-medium":"text-gray-500 hover:text-gray-700"]])},b(o.label),11,ge)),64))]),e("div",_e,[(l(!0),r(j,null,V(f.value,o=>(l(),r("div",{key:o.service,class:"border rounded-lg p-4 hover:border-blue-500 cursor-pointer"},[e("div",xe,[e("div",null,[e("div",he,[c[0]||(c[0]=e("img",{src:"/images/jne-logo.svg",alt:"JNE",class:"h-8 w-auto"},null,-1)),e("div",null,[e("h3",ke,b(o.description),1),e("p",ye,b(y(o.cost[0].etd)),1)])])]),e("div",we,[c[1]||(c[1]=e("div",{class:"text-blue-500 text-sm"},"Cashback Rp 1.200",-1)),e("div",je,"Rp "+b(g(o.cost[0].value)),1)])]),c[2]||(c[2]=le('<div class="mt-2" data-v-d58cb0be><div class="flex items-center gap-2 text-gray-600" data-v-d58cb0be><div class="flex items-center" data-v-d58cb0be><svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d58cb0be><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-d58cb0be></path></svg><span class="ml-1" data-v-d58cb0be>88% Pengiriman sukses</span></div><div class="flex items-center ml-4" data-v-d58cb0be><svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d58cb0be><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-d58cb0be></path></svg><span class="ml-1" data-v-d58cb0be>100% Ketepatan waktu</span></div></div></div>',1))]))),128))])]))}},Ce=pe($e,[["__scopeId","data-v-d58cb0be"]]),Se={class:"mb-6"},Te={class:"mb-4 relative"},Ve={key:0,class:"absolute z-10 w-full bg-gray-700 text-white border rounded shadow mt-1 max-h-48 overflow-auto"},Ae=["onMousedown"],Be={class:"mb-4 relative"},Me={key:0,class:"absolute z-10 w-full bg-gray-700 text-white border rounded shadow mt-1 max-h-48 overflow-auto"},Ee=["onMousedown"],Ne={class:"mb-4 relative"},Ie={key:0,class:"mt-4 shadow text-center text-gray-500"},Oe={key:1,class:"mt-0"},Pe={key:0,class:"max-h-[300px] shadow overflow-x-auto"},Re={class:"min-w-full border text-sm"},qe=["onClick"],Fe={class:"border px-3 py-2 font-semibold"},Ue={class:"border px-3 py-2"},De={key:1,class:"min-h-[50px] flex flex-column items-center justify-center"},Je={class:"mb-4"},Ke={class:"flex items-end gap-2"},ze={class:"flex-1"},He={key:0,class:"mb-4 p-4 bg-red-100 text-red-700 rounded-md"},Ge={class:"mt-8"},We={__name:"CekOngkir",props:{errors:{type:Object,default:()=>({})}},setup(p){const i=p,a=oe({asal:null,tujuan:null,agen:null,berat:1,satuan:"kg"}),d=v(""),f=v(""),g=v(""),y=v(!1),m=v([]),c=v(null),o=v([]),$=v(!1);let O=null;const C=v([]),B=v(!1);let P=null;const k=v([]),M=v(!1),R=v("");function Y(){if($.value=!!f.value,O&&clearTimeout(O),!f.value){o.value=[];return}O=setTimeout(async()=>{const t=await fetch(`/api/districts/search?q=${encodeURIComponent(f.value)}`);t.ok?o.value=await t.json():o.value=[]},300)}function Q(t){f.value=t.address,a.asal=t,$.value=!1}function W(){if(B.value=!!d.value,P&&clearTimeout(P),!d.value){C.value=[],g.value="";return}P=setTimeout(async()=>{const t=await fetch(`/api/districts/search?q=${encodeURIComponent(d.value)}`);t.ok?(C.value=await t.json(),k.value=[]):(C.value=[],g.value="",a.agen=null)},300)}async function Z(t){d.value=t.address,a.tujuan=t,B.value=!1,M.value=!0,k.value=[];try{const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),_=await fetch("/api/agen/nearby",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s},body:JSON.stringify({tujuan:a.tujuan})});_.ok&&(k.value=await _.json(),k.value.length==1&&(a.agen=k.value[0],g.value=a.agen.address))}finally{M.value=!1}}async function ee(t){g.value=t.address,a.agen=t,m.value=[],c.value=null}function se(t){return t=="g"?a.berat/1e3:a.berat*1e3}q(()=>a,t=>{t||($.value=!1)}),q(()=>a.tujuan,t=>{t||(B.value=!1)}),q(()=>a.satuan,(t,s)=>{a.berat=se(s)});const ae=()=>{m.value=[],c.value=null,a.post("/cek-ongkir",{onProgress(){y.value=!0},onSuccess(t){var s,_;t.props.success?(m.value=(_=(s=t.props.data)==null?void 0:s.rajaongkir)==null?void 0:_.results[0].costs,c.value=t.props.data.rajaongkir):(console.error("Error:",error),R.value=error.message||"Terjadi kesalahan saat mengambil data ongkos kirim.")},onError(t){console.error(t)},onFinish(){y.value=!1}})};return(t,s)=>(l(),r(j,null,[u(h(re),{title:"Cek Ongkir"}),u(ce,{class:"max-w-xl mx-auto mt-8"},{default:x(()=>[u(ve,null,{default:x(()=>s[5]||(s[5]=[e("h1",{class:"text-4xl font-bold"},"Cek Ongkir",-1)])),_:1}),u(me,null,{default:x(()=>{var _,K,z,H,G,L;return[e("form",{onSubmit:F(ae,["prevent"])},[e("div",Se,[s[13]||(s[13]=e("h2",{class:"text-lg font-semibold mb-4"},"Data Paket",-1)),e("div",Te,[u(E,{for:"asal"},{default:x(()=>s[6]||(s[6]=[T("Asal "),e("span",{class:"text-red-500"},"*",-1)])),_:1}),u(N,{id:"asal",modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=n=>f.value=n),onInput:Y,placeholder:"Cijerrah, Bandung Kulon, Bandung, Kota, Jawa Barat",class:"mt-1",required:"",autocomplete:"off"},null,8,["modelValue"]),$.value&&o.value.length?(l(),r("div",Ve,[(l(!0),r(j,null,V(o.value,(n,S)=>(l(),r("div",{key:S,onMousedown:F(X=>Q(n),["prevent"]),class:"px-3 py-2 cursor-pointer hover:bg-blue-400"},b(n.address),41,Ae))),128))])):w("",!0),u(I,{message:(K=(_=i.errors)==null?void 0:_.asal)==null?void 0:K.subdistrict_id},null,8,["message"])]),e("div",Be,[u(E,{for:"tujuan"},{default:x(()=>s[7]||(s[7]=[T("Tujuan "),e("span",{class:"text-red-500"},"*",-1)])),_:1}),u(N,{id:"tujuan",modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=n=>d.value=n),onInput:W,placeholder:"Paminggir, Garut Kota, Garut, Jawa Barat",class:"mt-1",required:"",autocomplete:"off"},null,8,["modelValue"]),B.value&&C.value.length?(l(),r("div",Me,[(l(!0),r(j,null,V(C.value,(n,S)=>(l(),r("div",{key:S,onMousedown:F(X=>Z(n),["prevent"]),class:"px-3 py-2 cursor-pointer hover:bg-blue-400"},b(n.address),41,Ee))),128))])):w("",!0),u(I,{message:(H=(z=i.errors)==null?void 0:z.tujuan)==null?void 0:H.subdistrict_id},null,8,["message"])]),e("div",Ne,[u(E,{for:"agen"},{default:x(()=>s[8]||(s[8]=[T("Pengiriman (Agen) "),e("span",{class:"text-red-500"},"*",-1)])),_:1}),u(N,{id:"agen",modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=n=>g.value=n),placeholder:"Pilih Agen",readonly:"",class:"mt-1"},null,8,["modelValue"]),u(I,{message:(L=(G=i.errors)==null?void 0:G.agen)==null?void 0:L.subdistrict_id},null,8,["message"]),M.value?(l(),r("div",Ie,"Memuat agen terdekat...")):w("",!0),M.value?w("",!0):(l(),r("div",Oe,[k.value.length?(l(),r("div",Pe,[e("table",Re,[s[9]||(s[9]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"border px-3 py-2"},"Nama Agen"),e("th",{class:"border px-3 py-2"},"Alamat")])],-1)),e("tbody",null,[(l(!0),r(j,null,V(k.value,(n,S)=>(l(),r("tr",{key:S,class:A(["cursor-pointer hover:bg-blue-200",{"bg-blue-200":n.address==g.value}]),onClick:X=>ee(n)},[e("td",Fe,b(n.name),1),e("td",Ue,b(n.address),1)],10,qe))),128))])])])):(l(),r("div",De,s[10]||(s[10]=[e("em",{class:"text-sm text-gray-700"},"Tidak ada agen tersedia",-1)])))]))]),e("div",Je,[e("div",Ke,[e("div",ze,[u(E,{for:"berat"},{default:x(()=>s[11]||(s[11]=[T("Berat "),e("span",{class:"text-red-500"},"*",-1)])),_:1}),u(N,{id:"berat",modelValue:h(a).berat,"onUpdate:modelValue":s[3]||(s[3]=n=>h(a).berat=n),type:"number",min:"1",class:"mt-1",required:""},null,8,["modelValue"])]),ne(e("select",{"onUpdate:modelValue":s[4]||(s[4]=n=>h(a).satuan=n),class:"h-9 border rounded-md px-2"},s[12]||(s[12]=[e("option",{value:"kg"},"kg",-1),e("option",{value:"g"},"g",-1)]),512),[[ue,h(a).satuan]])]),u(I,{message:i.errors.berat},null,8,["message"])])]),R.value?(l(),r("div",He,b(R.value),1)):w("",!0),u(ie,{class:"w-full",type:"submit",disabled:y.value},{default:x(()=>[T(b(y.value?"Memuat...":"Lihat Estimasi Ongkir"),1)]),_:1},8,["disabled"])],32),e("div",Ge,[s[14]||(s[14]=e("h2",{class:"text-lg font-semibold mb-4"},"Hasil Pencarian",-1)),m.value&&m.value.length?(l(),de(Ce,{key:0,services:m.value},null,8,["services"])):w("",!0)])]}),_:1})]),_:1})],64))}};export{We as default};
